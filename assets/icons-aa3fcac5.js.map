{"version":3,"file":"icons-aa3fcac5.js","sources":["../../src/js/services/FoodBoutiqueApi.js","../../src/js/footer.js","../../src/js/services/Storage.js","../../src/js/services/Cart.js","../../src/js/header.js","../../src/img/icons.svg"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\nconst CATEGORIES_ENDPOINT = 'products/categories';\nconst PRODUCTS_ENDPOINT = 'products';\nconst PRODUCT_ENDPOINT = 'products/';\nconst POPULAR_PRODUCTS_ENDPOINT = 'products/popular';\nconst DISCOUNTED_PRODUCTS_ENDPOINT = 'products/discount';\nconst SUBSCRIBE_ENDPOINT = 'subscription';\nconst ORDERS_ENDPOINT = 'orders';\n\nconst api = axios.create({ baseURL: BASE_URL });\n\nexport default class FoodBotiqueApi {\n  static async getCategories() {\n    const response = await api.get(CATEGORIES_ENDPOINT);\n\n    return response.data;\n  }\n\n  static async getProducts({ keyword, category, page, limit, sortBy } = {}) {\n    const response = await api.get(PRODUCTS_ENDPOINT, {\n      params: {\n        keyword,\n        category,\n        page,\n        limit,\n        [sortBy?.key]: sortBy?.value,\n      },\n    });\n\n    return response.data;\n  }\n\n  static async getProduct(id) {\n    const response = await api.get(PRODUCT_ENDPOINT + id);\n\n    return response.data;\n  }\n\n  static async getPopularProducts(limit = 5) {\n    const response = await api.get(POPULAR_PRODUCTS_ENDPOINT, {\n      params: { limit },\n    });\n\n    return response.data;\n  }\n\n  static async getDiscountedProducts() {\n    const response = await api.get(DISCOUNTED_PRODUCTS_ENDPOINT);\n\n    return response.data;\n  }\n\n  static async subscribe(email) {\n    // response 409 means that subscription already exists\n    const response = await api.post(SUBSCRIBE_ENDPOINT, { email });\n\n    return response.data;\n  }\n\n  static async placeOrder(cart) {\n    const { email, products } = cart;\n    const response = await api.post(ORDERS_ENDPOINT, {\n      email,\n      products: products.map(({ productId, amount }) => ({\n        productId,\n        amount,\n      })),\n    });\n\n    return response.data;\n  }\n}\n","import FoodBotiqueApi from './services/FoodBoutiqueApi';\n\n// MODAL WINDOW\nconst refs = {\n  openModalPolicy: document.querySelector('.js-modal-policy-open'),\n  openModalTerms: document.querySelector('.js-modal-terms-open'),\n  closeModalPolicyBtn: document.querySelector('.js-policy-close'),\n  closeModalTermsBtn: document.querySelector('.js-terms-close'),\n  policyLink: document.querySelector('.js-policy'),\n  termsLink: document.querySelector('.js-terms'),\n\n  footerForm: document.querySelector('.footer-subscribe-form'),\n\n  closeModalSubscribeBtn: document.querySelector('.js-subscribe-close'),\n  subscribeLink: document.querySelector('.js-subscribe'),\n  subscribeText: document.querySelector('.subscribe-text'),\n};\n\nrefs.openModalPolicy.addEventListener('click', () => {\n  onPolicyClick();\n  refs.closeModalPolicyBtn.addEventListener('click', onPolicyClick, {\n    once: true,\n  });\n});\n\nrefs.openModalTerms.addEventListener('click', () => {\n  onTermsClick();\n  refs.closeModalTermsBtn.addEventListener('click', onTermsClick, {\n    once: true,\n  });\n});\n\nfunction onPolicyClick() {\n  refs.policyLink.classList.toggle('is-hidden-policy');\n  document.body.classList.toggle('is-modal-open');\n}\n\nfunction onTermsClick() {\n  refs.termsLink.classList.toggle('is-hidden-policy');\n  document.body.classList.toggle('is-modal-open');\n}\n\n// =================MODAL WINDOW SUBSCRIBE\n\nrefs.footerForm.addEventListener('submit', onFooterFormSubmit);\n\nfunction onFooterFormSubmit(e) {\n  e.preventDefault();\n  const formElements = e.currentTarget.elements;\n  const email = formElements.email.value;\n\n  FoodBotiqueApi.subscribe(email)\n    .then(response => {\n      onSubscribeClick(response);\n      refs.footerForm.reset();\n    })\n    .catch(onNotSubscribeClick);\n}\n\nfunction onNotSubscribeClick(e) {\n  let message = 'Your subscription to our store has already been made before';\n\n  if (e.response.status !== 409) {\n    message = 'Invalid email address, please double check your email';\n\n    if (e.response.status >= 500) {\n      message = 'Server error, please try again later';\n    }\n  }\n\n  onSubscribeClick({ message });\n}\n\n// =================MODAL WINDOW SUBSCRIBE TEXT\nfunction onSubscribeClick({ message }) {\n  refs.subscribeText.innerHTML = message;\n  refs.subscribeLink.classList.toggle('is-hidden-subscribe');\n  document.body.classList.toggle('is-modal-open');\n\n  refs.closeModalSubscribeBtn.addEventListener('click', closeModal);\n}\n\nfunction closeModal() {\n  refs.subscribeLink.classList.toggle('is-hidden-subscribe'), { once: true };\n  document.body.classList.toggle('is-modal-open');\n}\n","export default class Storage {\n  static CART_KEY = 'cart';\n  static CATEGORIES_KEY = 'categories';\n  static FILTER_KEY = 'filter';\n  static POPULAR_PRODUCTS_KEY = 'popular-products';\n  static DISCOUNTED_PRODUCTS_KEY = 'discounted-products';\n\n  static get(key) {\n    return JSON.parse(localStorage.getItem(key));\n  }\n\n  static remove(key) {\n    localStorage.removeItem(key);\n  }\n\n  static set(key, data) {\n    localStorage.setItem(key, JSON.stringify(data));\n  }\n\n  static setWithExpiry(key, value, expireInMinutes = 60) {\n    Storage.set(key + '_EXPIRY', {\n      value: value,\n      expiry: new Date().getTime() + expireInMinutes * 60 * 1000,\n    });\n  }\n\n  static getWithExpiry(key) {\n    const data = Storage.get(key + '_EXPIRY');\n\n    if (data && data.expiry < new Date().getTime()) {\n      Storage.remove(key + '_EXPIRY');\n      return null;\n    }\n\n    return data?.value;\n  }\n}\n","import Storage from './Storage';\n\nconst storageKey = Storage.CART_KEY;\nconst cartDefault = { email: '', products: [] };\n\nexport default class Cart {\n  // Get cart object\n  static get() {\n    return Storage.get(storageKey) ?? cartDefault;\n  }\n\n  // Add single product to the cart\n  static add(product, quantity = 1) {\n    Cart.update(product, quantity);\n  }\n\n  // Update existed product's quantity. Add product if it's not there\n  static update(product, amount = 1) {\n    const cart = Cart.get();\n    const productIndex = Cart.#findProductIndex(cart.products, product._id);\n\n    // If product already in the cart, update the quantity\n    if (productIndex !== null) {\n      cart.products[productIndex] = {\n        ...cart.products[productIndex],\n        amount,\n      };\n    } else {\n      cart.products.push({\n        productId: product._id,\n        product,\n        amount,\n      });\n    }\n\n    Storage.set(storageKey, cart);\n  }\n\n  // Remove product from cart\n  static delete(productId) {\n    const cart = Cart.get();\n    const productIndex = Cart.#findProductIndex(cart.products, productId);\n\n    if (productIndex !== null) {\n      cart.products.splice(productIndex, 1);\n      Storage.set(storageKey, cart);\n    }\n  }\n\n  // Get single product from cart if exists\n  static getProduct(productId) {\n    const cart = Cart.get();\n    const productIndex = Cart.#findProductIndex(cart.products, productId);\n\n    return productIndex !== null ? cart.products[productIndex] : null;\n  }\n\n  // Get total price of all items in the cart\n  static getTotal() {\n    const cart = Cart.get();\n\n    const total = cart.products.reduce((total, product) => {\n      const lineItemTotal = product.product.price * product.amount;\n      return total + lineItemTotal;\n    }, 0);\n\n    return Math.round(total * 100) / 100;\n  }\n\n  static getProducts() {\n    return Cart.get().products;\n  }\n\n  static getEmail() {\n    return Cart.get().email;\n  }\n\n  // Get count of products in the cart\n  static getCount() {\n    return Cart.get().products.length;\n  }\n\n  static setEmail(email) {\n    Storage.set(storageKey, {\n      ...Cart.get(),\n      email,\n    });\n  }\n\n  static clearCart() {\n    Storage.set(storageKey, cartDefault);\n  }\n\n  static #findProductIndex(products, id) {\n    const productIndex = products.findIndex(\n      ({ productId }) => productId === id\n    );\n\n    return productIndex !== -1 ? productIndex : null;\n  }\n}\n","import Cart from './services/Cart';\n\nexport default function updateCartItemCount() {\n  const allCartCounts = [...document.getElementsByClassName('cart-item-count')];\n\n  allCartCounts.map(el => (el.textContent = Cart.getCount()));\n}\n","export default \"__VITE_ASSET__bf8d566a__\""],"names":["BASE_URL","CATEGORIES_ENDPOINT","PRODUCTS_ENDPOINT","PRODUCT_ENDPOINT","POPULAR_PRODUCTS_ENDPOINT","DISCOUNTED_PRODUCTS_ENDPOINT","SUBSCRIBE_ENDPOINT","ORDERS_ENDPOINT","api","axios","FoodBotiqueApi","keyword","category","page","limit","sortBy","id","email","cart","products","productId","amount","refs","onPolicyClick","onTermsClick","onFooterFormSubmit","e","response","onSubscribeClick","onNotSubscribeClick","message","closeModal","_Storage","key","data","value","expireInMinutes","Storage","__publicField","storageKey","cartDefault","_Cart","product","quantity","productIndex","__privateMethod","_a","_findProductIndex","findProductIndex_fn","total","lineItemTotal","Cart","__privateAdd","updateCartItemCount","el","icons"],"mappings":"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"}