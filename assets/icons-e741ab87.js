var S=Object.defineProperty;var C=(r,e,t)=>e in r?S(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>(C(r,typeof e!="symbol"?e+"":e,t),t),O=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var E=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var f=(r,e,t)=>(O(r,e,"access private method"),t);import{a as D}from"./vendor-3d670edc.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=t(s);fetch(s.href,c)}})();const N="https://food-boutique.b.goit.study/api/",h="products/categories",R="products",v="products/",k="products/popular",x="products/discount",q="subscription",M="orders",u=D.create({baseURL:N});class U{static async getCategories(){return(await u.get(h)).data}static async getProducts({keyword:e,category:t,page:o,limit:s,sortBy:c}={}){return(await u.get(R,{params:{keyword:e,category:t,page:o,limit:s,[c==null?void 0:c.key]:c==null?void 0:c.value}})).data}static async getProduct(e){return(await u.get(v+e)).data}static async getPopularProducts(e=5){return(await u.get(k,{params:{limit:e}})).data}static async getDiscountedProducts(){return(await u.get(x)).data}static async subscribe(e){return(await u.post(q,{email:e})).data}static async placeOrder(e){const{email:t,products:o}=e;return(await u.post(M,{email:t,products:o.map(({productId:c,amount:l})=>({productId:c,amount:l}))})).data}}const a={openModalPolicy:document.querySelector(".js-modal-policy-open"),openModalTerms:document.querySelector(".js-modal-terms-open"),closeModalPolicyBtn:document.querySelector(".js-policy-close"),closeModalTermsBtn:document.querySelector(".js-terms-close"),policyLink:document.querySelector(".js-policy"),termsLink:document.querySelector(".js-terms"),footerForm:document.querySelector(".footer-subscribe-form"),closeModalSubscribeBtn:document.querySelector(".js-subscribe-close"),subscribeLink:document.querySelector(".js-subscribe"),subscribeText:document.querySelector(".subscribe-text")};a.openModalPolicy.addEventListener("click",()=>{P(),a.closeModalPolicyBtn.addEventListener("click",P,{once:!0})});a.openModalTerms.addEventListener("click",()=>{T(),a.closeModalTermsBtn.addEventListener("click",T,{once:!0})});function P(){a.policyLink.classList.toggle("is-hidden-policy"),document.body.classList.toggle("is-modal-open")}function T(){a.termsLink.classList.toggle("is-hidden-policy"),document.body.classList.toggle("is-modal-open")}a.footerForm.addEventListener("submit",w);function w(r){r.preventDefault();const t=r.currentTarget.elements.email.value;U.subscribe(t).then(o=>{I(o),a.footerForm.reset()}).catch(Y)}function Y(r){let e="Your subscription to our store has already been made before";r.response.status!==409&&(e="Invalid email address, please double check your email",r.response.status>=500&&(e="Server error, please try again later")),I({message:e})}function I({message:r}){a.subscribeText.innerHTML=r,a.subscribeLink.classList.toggle("is-hidden-subscribe"),document.body.classList.toggle("is-modal-open"),a.closeModalSubscribeBtn.addEventListener("click",A)}function A(){a.subscribeLink.classList.toggle("is-hidden-subscribe"),document.body.classList.toggle("is-modal-open")}const g=class{static get(e){return JSON.parse(localStorage.getItem(e))}static remove(e){localStorage.removeItem(e)}static set(e,t){localStorage.setItem(e,JSON.stringify(t))}static setWithExpiry(e,t,o=60){g.set(e+"_EXPIRY",{value:t,expiry:new Date().getTime()+o*60*1e3})}static getWithExpiry(e){const t=g.get(e+"_EXPIRY");return t&&t.expiry<new Date().getTime()?(g.remove(e+"_EXPIRY"),null):t==null?void 0:t.value}};let i=g;d(i,"CART_KEY","cart"),d(i,"CATEGORIES_KEY","categories"),d(i,"FILTER_KEY","filter"),d(i,"POPULAR_PRODUCTS_KEY","popular-products"),d(i,"DISCOUNTED_PRODUCTS_KEY","discounted-products");const m=i.CART_KEY,L={email:"",products:[]};var p,y;const n=class{static get(){return i.get(m)??L}static add(e,t=1){n.update(e,t)}static update(e,t=1){var c;const o=n.get(),s=f(c=n,p,y).call(c,o.products,e._id);s!==null?o.products[s]={...o.products[s],amount:t}:o.products.push({productId:e._id,product:e,amount:t}),i.set(m,o)}static delete(e){var s;const t=n.get(),o=f(s=n,p,y).call(s,t.products,e);o!==null&&(t.products.splice(o,1),i.set(m,t))}static getProduct(e){var s;const t=n.get(),o=f(s=n,p,y).call(s,t.products,e);return o!==null?t.products[o]:null}static getTotal(){const t=n.get().products.reduce((o,s)=>{const c=s.product.price*s.amount;return o+c},0);return Math.round(t*100)/100}static getProducts(){return n.get().products}static getEmail(){return n.get().email}static getCount(){return n.get().products.length}static setEmail(e){i.set(m,{...n.get(),email:e})}static clearCart(){i.set(m,L)}};let b=n;p=new WeakSet,y=function(e,t){const o=e.findIndex(({productId:s})=>s===t);return o!==-1?o:null},E(b,p);function K(){[...document.getElementsByClassName("cart-item-count")].map(e=>e.textContent=b.getCount())}const _="/food-boutique/assets/icons-8fcbdd30.svg";export{b as C,U as F,i as S,_ as i,K as u};
//# sourceMappingURL=icons-e741ab87.js.map
