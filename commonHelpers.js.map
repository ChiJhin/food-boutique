{"version":3,"file":"commonHelpers.js","sources":["../src/js/modal-success.js","../src/js/cart.js"],"sourcesContent":["const closeModalSuccessButton = document.querySelector(\n  '.success-modal-close-btn'\n);\nconst modal = document.querySelector('.success-blackdrop');\nconst modalTitle = document.querySelector('.success-modal-title');\nconst modalText = document.querySelector('.success-modal-text');\n\nexport default function openOrderModal(\n  message,\n  isSuccess,\n  callbackFunction = () => {}\n) {\n  modalTitle.textContent = isSuccess ? 'Order success' : 'Order error';\n  modalText.textContent = message;\n\n  document.body.classList.add('is-modal-open');\n  modal.classList.remove('is-hidden');\n\n  closeModalSuccessButton.addEventListener('click', function () {\n    modal.classList.add('is-hidden');\n    document.body.classList.remove('is-modal-open');\n    callbackFunction();\n  });\n}\n","import FoodBotiqueApi from './services/FoodBoutiqueApi';\nimport './footer';\nimport './modal-success';\nimport updateCartItemCount from './header';\nimport icons from '../img/icons.svg';\nimport Cart from './services/Cart';\nimport openOrderModal from './modal-success';\n\n// Update Cart Icon Count\nupdateCartItemCount();\n\nconst cartContainer = document.querySelector('.cart');\nconst emptyCartSection = document.querySelector('.empty-cart');\nconst deleteAllButton = document.querySelector('.cart-delete-button');\nconst totalPriceElement = document.querySelector('.cart-sum span');\nconst productListContainer = document.querySelector('.cart-added-list');\nconst emailInput = document.querySelector('.cart-basket-input');\nconst form = document.querySelector('.checkout-field');\n\nemailInput.value = Cart.getEmail();\n\nfunction clearCart() {\n  Cart.clearCart();\n  updateCartUI();\n}\n\n// Clear Cart\ndeleteAllButton.addEventListener('click', clearCart);\n\nform.addEventListener('submit', checkout);\nemailInput.addEventListener('focusout', saveEmail);\n\n// Initial cart render\nupdateCartDisplay();\n\n// Update Cart UI\nfunction updateCartUI() {\n  updateCartItemCount();\n  updateCartDisplay();\n}\n\nfunction showEmptyCart() {\n  emptyCartSection.style.display = 'block';\n  cartContainer.style.display = 'none';\n}\n\n// Update Basket\nfunction updateCartDisplay() {\n  if (Cart.getCount() === 0) {\n    showEmptyCart();\n    return;\n  }\n\n  const cartProducts = Cart.getProducts();\n  renderCartItems(cartProducts);\n  updateTotalPrice(cartProducts);\n}\n\n// Render Products in the cart\nfunction renderCartItems(products) {\n  let cartItemList = document.querySelector('.cart-basket-list');\n\n  // Clear current product list\n  if (cartItemList) {\n    cartItemList.remove();\n  }\n\n  cartItemList = document.createElement('ul');\n  cartItemList.className = 'cart-basket-list';\n\n  // Add product card to the list\n  products.forEach(product => {\n    const listItem = createCartItemElement(product);\n    cartItemList.appendChild(listItem);\n  });\n\n  productListContainer.appendChild(cartItemList);\n\n  cartItemList.addEventListener('click', ({ target }) => {\n    const productLi = target.closest('LI');\n\n    if (!productLi) {\n      return;\n    }\n\n    const deleteProductBtn = target.closest('.cart-product-delete-button');\n    const decrementBtn = target.closest('.minus-btn');\n    const incrementBtn = target.closest('.plus-btn');\n\n    if (!deleteProductBtn && !decrementBtn && !incrementBtn) {\n      console.log('wrong click');\n      return;\n    }\n\n    const productId = productLi.dataset.productId;\n\n    if (deleteProductBtn) {\n      Cart.delete(productId);\n      updateCartUI();\n      return;\n    }\n\n    const spanQuantity = productLi.querySelector('.quantity');\n    const product = Cart.getProduct(productId).product;\n\n    if (decrementBtn) {\n      const countValue = spanQuantity.textContent - 1;\n      spanQuantity.textContent = countValue;\n\n      if (countValue < 1) {\n        // If we just decreased the count to 0, that means that we are removing it from the cart\n        spanQuantity.textContent = 1;\n        Cart.delete(productId);\n        updateTotalPrice();\n        updateCartUI();\n      } else {\n        Cart.update(product, countValue);\n        updateTotalPrice();\n      }\n    } else {\n      const countValue = Number(spanQuantity.textContent) + 1;\n      spanQuantity.textContent = countValue;\n      Cart.update(product, countValue);\n      updateTotalPrice();\n    }\n  });\n}\n\n// Create cart item\nfunction createCartItemElement({ product, productId, amount }) {\n  const {\n    name = 'Product name',\n    category = 'Category',\n    size = 'Size',\n    price = 0,\n    img = '',\n  } = product;\n\n  const listItem = document.createElement('li');\n  listItem.classList.add('cart-basket-item');\n  listItem.dataset.productId = productId;\n\n  listItem.innerHTML = `\n    <button class=\"cart-product-delete-button\" type=\"button\" aria-label=\"cart product delete\">\n      <svg class=\"cart-delete-product-icon\" width=\"18\" height=\"18\">\n        <use href=\"${icons}#icon-x-close\" data-product-id=\"${productId}\"></use>\n      </svg>\n    </button>\n    <div class=\"image-cart-thumb\">\n      <img class=\"cart-image\" src=\"${img}\" alt=\"${name}\" width=\"64\" />\n    </div>\n    <div class=\"cart-description-thumb\">\n      <h3 class=\"cart-product-name\">${name}</h3>\n      <div class=\"cart-text-description-container\">\n        <p class=\"cart-product-description\">\n          Category:\n          <span class=\"category cart-description\">${category}</span>\n        </p>\n        <p class=\"cart-product-description\">\n          Size:\n          <span class=\"size cart-description\">${size}</span>\n        </p>\n      </div>\n      <div class=\"price-and-quantity\">\n        <span class=\"cart-price\">$${price.toFixed(2)}</span>\n\n        <div class=\"quantity-in-cart\">\n            <button type=\"button\" class=\"minus-btn\" aria-label=\"minus quantity product\">\n              <svg class=\"minus-btn-icon\">\n                <use href=\"${icons}#icon-minus\"></use>\n              </svg>\n            </button>\n          <span class=\"quantity\">${amount}</span>\n            <button type=\"button\" class=\"plus-btn\" aria-label=\"plus quantity product\">\n              <svg class=\"plus-btn-icon\">\n                <use href=\"${icons}#icon-plus\"></use>\n              </svg>\n            </button>\n        </div>\n      </div>\n    </div>\n  `;\n\n  return listItem;\n}\n\nfunction checkout(e) {\n  e.preventDefault();\n\n  FoodBotiqueApi.placeOrder(Cart.get())\n    .then(response => openOrderModal(response.message, true, clearCart))\n    .catch(err => openOrderModal(err.response.data.message, false));\n}\n\nfunction saveEmail() {\n  const email = form.elements['cart-client-email'].value.trim();\n\n  Cart.setEmail(email);\n}\n\nfunction updateTotalPrice() {\n  const total = Cart.getTotal();\n  totalPriceElement.innerHTML = `$${total.toFixed(2)}`;\n}\n"],"names":["closeModalSuccessButton","modal","modalTitle","modalText","openOrderModal","message","isSuccess","callbackFunction","updateCartItemCount","cartContainer","emptyCartSection","deleteAllButton","totalPriceElement","productListContainer","emailInput","form","Cart","clearCart","updateCartUI","checkout","saveEmail","updateCartDisplay","showEmptyCart","cartProducts","renderCartItems","updateTotalPrice","products","cartItemList","product","listItem","createCartItemElement","target","productLi","deleteProductBtn","decrementBtn","incrementBtn","productId","spanQuantity","countValue","amount","name","category","size","price","img","icons","FoodBotiqueApi","response","err","email","total"],"mappings":"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"}